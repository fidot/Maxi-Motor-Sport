/*!CK:1558218566!*//*1420443165,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["k6\/Cy"]); }

__d("AdsImageStore",["AdsBaseDataStore","AdsImageActionType","AdsImageDataManager","AdsImageDataDispatcher","AdsLoadState","curry","deepFreezeValue"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=[];m(n);var o={};m(o);var p={};for(var q in g)if(g.hasOwnProperty(q))s[q]=g[q];var r=g===null?null:g.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=g;function s(){g.call(this);this.$AdsImageStoreClass0={};}s.prototype.getDataManager=function(){return i;};s.prototype.getStoreName=function(){return 'AdsImageStore';};s.prototype.onDispatchToken=function(v){var w=v.action;switch(w.actionType){case h.BATCH_LOADED:this.__handleData(w.images,k.LOADED);break;case h.BATCH_LOAD_ERROR:this.__handleData(w.errors,k.ERROR);break;case h.LOAD_IMAGES_SUCCESS:this.$AdsImageStoreClass1(w.accountID,w.images);this.inform('change');break;case h.LOAD_DIMENSION_SUCCESS:var x={width:w.width,height:w.height};m(x);p[w.url]=x;this.inform('change');break;case h.LOAD_DIMENSION_ERROR:delete p[w.url];this.inform('change');break;default:return;}};s.prototype.get=function(v,w){return this.getAll(v,[w]).get(w);};s.prototype.getAll=function(v,w){var x=this.__updateLoading(w);if(x.length>0)i.loadAll(v,x);return this.getAllCached(w);};s.prototype.getImages_DEPRECATED=function(v){var w=this.$AdsImageStoreClass0[v];if(w===o)return n;if(w)return w.list;this.$AdsImageStoreClass0[v]=o;j.loadImagesForAccountID(v);return n;};s.prototype.getImageByHash_DEPRECATED=function(v,w){var x=this.$AdsImageStoreClass0[v];if(x===o)return null;if(!x){this.getImages_DEPRECATED(v);return null;}var y=x.map[w];if(y===o)return null;if(typeof y==='number')return x.list[y];x.map[w]=o;j.loadImagesForAccountID(v,[w]);return null;};s.prototype.getImageDimensionsByURL=function(v){var w=p[v];if(w)return w===o?null:w;p[v]=o;j.loadImageDimensionsForURL(v);return null;};s.prototype.$AdsImageStoreClass1=function(v,w){var x=this.$AdsImageStoreClass0[v];if(!(x&&x!==o))x={list:[],map:{}};w.forEach(l(this.$AdsImageStoreClass2,x.list,x.map));this.$AdsImageStoreClass0[v]=x;};s.prototype.$AdsImageStoreClass2=function(v,w,x){if(x.url&&x.width&&x.height){var y={width:x.width,height:x.height};m(y);p[x.url]=y;}var z=t(x),aa=w[z];if(typeof aa==='number'){v[aa]=x;}else{v.push(x);aa=v.length-1;w[z]=aa;}};function t(v){if(v.stockImageID)return v.stockImageID;return v.hash||v.url;}var u=new s();e.exports=u;},null);