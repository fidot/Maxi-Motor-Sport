/*!CK:1425702827!*//*1420443165,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ANICj"]); }

__d("AdsStoreUtils",["AdsCachedLoadState","AdsLoadState","ImmutableObject","Promise","merge"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l={_testResolve:function(m,n){if(m)if(m.loadState){if(m.loadState===h.LOADED)return true;}else if(!n)return l._testResolveAll(m);return false;},_testReject:function(m){if(!m||m.loadState===h.ERROR)return true;return false;},_testResolveAll:function(m){if(m&&m.forEach){var n=true;m.forEach(function(o){if(!l._testResolve(o,true)&&!l._testReject(o))n=false;});if(n)return true;}return false;},promiseAsyncGetForSyncStore:function(m,n,o,p){o=o||l._testResolve;p=p||l._testReject;return new j(function(q,r){var s=null,t=function(){var u=n(),v=false;if(o(u)){v=true;q(u);}else if(p(u)){v=true;r(u);}if(v&&s)s.unsubscribe();};s=m.subscribe('change',t);t();});},handleData:function(m,n,o,p){if(!m.shouldUpdate(n,p))return false;m.set(n,new i(k(o,g.LOADED)),p);return true;},handleError:function(m,n,o,p){if(!m.shouldUpdate(n,p))return false;var q=k({error:o},g.ERROR),r=m.get(n,g.NOT_LOADED);if(r.loadState===h.LOADED)q.previousData=r;m.set(n,new i(q),p);return true;},updateLoading:function(m,n){var o=[];n.forEach(function(p){var q=m.get(p,g.NOT_LOADED);if(q.loadState===h.NOT_LOADED){m.set(p,g.LOADING);o.push(p);}});return o;}};e.exports=l;},null);